<?xml version="1.0" encoding="utf-8"?> 
<odoo>

  <!--  Form view  --> 
  <record id="view_form_pubble_production_data_connector" model="ir.ui.view">
    <field name="name">Pubble production data connector</field>
    <field name="model">pubble.production.config</field> 
    <field name="arch" type="xml">
      <form string="Pubble production data connector" create="false" edit="false" action="false" 
                                     class="oe_form_configuration">
        <header > 
        </header>

          <br/>
          <group name="connector_config" string="Connector configuration">
            <field name="server"/> 
            <field name="method"/> 
          </group>
          <button name="save_config" type="object" 
            string="Save" class="oe_highlight" /> 
          <br/>
          <br/>


          <group name="production_status" string="Production status">
            <group>
              <field name="latest_success" readonly="1"/> 
              <field name="latest_week"    readonly="1"/> 
              <field name="latest_run"     readonly="1" widget="html"/> 
              <field name="latest_status"  readonly="1"/> 
              <field name="latest_reason"  readonly="1"/> 
            </group>
            <group>
            </group>
          </group>
          <br/>
          <br/>



          <group name="manual_run" string="Manual collect" >
            <div colspan="2">
              <p>Enter dates and press "Collect" to collect records for given period. </p>
            </div>
            <group>
              <field name="begin"/> 
              <field name="end"/> 
            </group>
            <group>
            </group>
          </group>
          <button string="Collect" name="do_collect" type="object" class="oe_highlight"/>
          <br/>
          <br/>


          <group name="documentation" string="Summary" col="1">
              <p>Pubble provides an API by which we can collect the editorial, photo and video production information together with additional expenses, related publications and commissioned-by data.</p>
              <p>Normal configuration expects a daily automated task calling the automated_do_collect procedure from the pubble.production.config object. This method uses the current system date to calculate last week to collect the corresponding period's info. </p> 
              <p>Apart from the initial configuration, the user may use this interface to collect information for dates that differ from the automated process. To circumvent processing (i.e. paying) twice the article ID and declarable product are used as a unique key to detect doubles. This way reruns it should be safe to do a re-run.</p>
              <p>Notice that products administered in Pubble have an Odoo counterpart in either the general or vendor (freelancer) specific price list. An Odoo pricelist product also assumes products are predefined.</p>              
              <p/>
              <p/>
              <a href="https://www.pubble.nl/" target="_blank"> More about Pubble</a>
          </group>


      </form>
    </field>
  </record> 

  <!-- Action -->
  <record id="config_pubble_production_data_connector" model="ir.actions.server"> 
    <field name="name">Pubble production data connector</field> 
    <field name="model_id" ref="model_pubble_production_config"/> 
    <field name="code">
      action = model.default_view()
    </field>
  </record> 

  <!-- Menu group -->
  <menuitem name= "Pubble admittance" 
            id= "menu_pubble_production" 
            parent="reverse_billing.menu_action_revbil_main"  
            sequence= "100"
  />

  <!-- Menu item --> 
  <menuitem id="pubble_production_data_config_menuitem" 
    name="Connector" 
    action="config_pubble_production_data_connector"
    parent="menu_pubble_production"
    sequence="125"
     /> 


</odoo>